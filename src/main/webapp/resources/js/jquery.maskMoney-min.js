(function(b){if(!b.browser){b.browser={};b.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase());b.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());b.browser.opera=/opera/.test(navigator.userAgent.toLowerCase());b.browser.msie=/msie/.test(navigator.userAgent.toLowerCase())}var a={destroy:function(){var c=b(this);c.unbind(".maskMoney");if(b.browser.msie){this.onpaste=null}return this},mask:function(){return this.trigger("mask")},init:function(c){c=b.extend({symbol:"",symbolStay:false,thousands:"",decimal:".",precision:2,defaultZero:true,allowZero:false,allowNegative:false},c);return this.each(function(){var o=b(this);var e=false;function q(){e=true}function l(){e=false}function s(B){B=B||window.event;var v=B.which||B.charCode||B.keyCode;if(v==undefined){return false}if(v<48||v>57){if(v==45){q();o.val(i(o));return false}else{if(v==43){q();o.val(o.val().replace("-",""));return false}else{if(v==13||v==9){if(e){l();b(this).change()}return true}else{if(b.browser.mozilla&&(v==37||v==39)&&B.charCode==0){return true}else{n(B);return true}}}}}else{if(o.val().length>=o.attr("maxlength")){return false}else{n(B);var z=String.fromCharCode(v);var u=o.get(0);var A=f(u);var y=A.start;var w=A.end;u.value=u.value.substring(0,y)+z+u.value.substring(w,u.value.length);g(u,y+1);q();return false}}}function m(A){A=A||window.event;var v=A.which||A.charCode||A.keyCode;if(v==undefined){return false}var u=o.get(0);var z=f(u);var y=z.start;var w=z.end;if(v==8){n(A);if(y==w){u.value=u.value.substring(0,y-1)+u.value.substring(w,u.value.length);y=y-1}else{u.value=u.value.substring(0,y)+u.value.substring(w,u.value.length)}g(u,y);q();return false}else{if(v==9){if(e){b(this).change();l()}return true}else{if(v==46||v==63272){n(A);if(u.selectionStart==u.selectionEnd){u.value=u.value.substring(0,y)+u.value.substring(w+1,u.value.length)}else{u.value=u.value.substring(0,y)+u.value.substring(w,u.value.length)}g(u,y);q();return false}else{return true}}}}function p(w){var u=r();if(o.val()==u){o.val("")}else{if(o.val()==""&&c.defaultZero){o.val(d(u))}else{o.val(d(o.val()))}}if(this.createTextRange){var v=this.createTextRange();v.collapse(false);v.select()}}function k(u){if(b.browser.msie){s(u)}if(o.val()==""||o.val()==d(r())||o.val()==c.symbol){if(!c.allowZero){o.val("")}else{if(!c.symbolStay){o.val(r())}else{o.val(d(r()))}}}else{if(!c.symbolStay){o.val(o.val().replace(c.symbol,""))}else{if(c.symbolStay&&o.val()==c.symbol){o.val(d(r()))}}}}function n(u){if(u.preventDefault){u.preventDefault()}else{u.returnValue=false}}function g(u,w){var v=o.val().length;o.val(j(u.value));var y=o.val().length;w=w-(v-y);h(o,w)}function t(){var u=o.val();o.val(j(u))}function j(D){D=D.replace(c.symbol,"");var u="0123456789";var A=D.length;var C="",E="",y="";if(A!=0&&D.charAt(0)=="-"){D=D.replace("-","");if(c.allowNegative){y="-"}}if(A==0){if(!c.defaultZero){return E}E="0.00"}for(var z=0;z<A;z++){if((D.charAt(z)!="0")&&(D.charAt(z)!=c.decimal)){break}}for(;z<A;z++){if(u.indexOf(D.charAt(z))!=-1){C+=D.charAt(z)}}var x=parseFloat(C);x=isNaN(x)?0:x/Math.pow(10,c.precision);E=x.toFixed(c.precision);z=c.precision==0?0:1;var w,B=(E=E.split("."))[z].substr(0,c.precision);for(w=(E=E[0]).length;(w-=3)>=1;){E=E.substr(0,w)+c.thousands+E.substr(w)}return(c.precision>0)?d(y+E+c.decimal+B+Array((c.precision+1)-B.length).join(0)):d(y+E)}function r(){var u=parseFloat("0")/Math.pow(10,c.precision);return(u.toFixed(c.precision)).replace(new RegExp("\\.","g"),c.decimal)}function d(v){if(c.symbol!=""){var u="";if(v.length!=0&&v.charAt(0)=="-"){v=v.replace("-","");u="-"}if(v.substr(0,c.symbol.length)!=c.symbol){v=u+c.symbol+v}}return v}function i(v){if(c.allowNegative){var u=v.val();if(v.val()!=""&&v.val().charAt(0)=="-"){return v.val().replace("-","")}else{return"-"+v.val()}}else{return v.val()}}function h(u,v){b(u).each(function(x,y){if(y.setSelectionRange){y.focus();y.setSelectionRange(v,v)}else{if(y.createTextRange){var w=y.createTextRange();w.collapse(true);w.moveEnd("character",v);w.moveStart("character",v);w.select()}}});return this}function f(y){var B=0,w=0,A,x,v,u,z;if(typeof y.selectionStart=="number"&&typeof y.selectionEnd=="number"){B=y.selectionStart;w=y.selectionEnd}else{x=document.selection.createRange();if(x&&x.parentElement()==y){u=y.value.length;A=y.value.replace(/\r\n/g,"\n");v=y.createTextRange();v.moveToBookmark(x.getBookmark());z=y.createTextRange();z.collapse(false);if(v.compareEndPoints("StartToEnd",z)>-1){B=w=u}else{B=-v.moveStart("character",-u);B+=A.slice(0,B).split("\n").length-1;if(v.compareEndPoints("EndToEnd",z)>-1){w=u}else{w=-v.moveEnd("character",-u);w+=A.slice(0,w).split("\n").length-1}}}}return{start:B,end:w}}if(!o.attr("readonly")){o.unbind(".maskMoney");o.bind("keypress.maskMoney",s);o.bind("keydown.maskMoney",m);o.bind("blur.maskMoney",k);o.bind("focus.maskMoney",p);o.bind("mask.maskMoney",t)}})}};b.fn.maskMoney=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.maskMoney")}}}})(jQuery);